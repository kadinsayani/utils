sudo apt update;sudo apt install -y acl attr autoconf automake dnsmasq-base git libacl1-dev libcap-dev liblxc1 liblxc-dev libsqlite3-dev libtool libudev-dev liblz4-dev libuv1-dev make pkg-config rsync squashfs-tools tar tcl xz-utils ebtables;command -v snap >/dev/null || sudo apt-get install -y snapd;sudo snap install --classic go;sudo apt install -y lvm2 thin-provisioning-tools;sudo apt install -y btrfs-progs;sudo apt install -y busybox-static curl gettext jq sqlite3 socat bind9-dnsutils;git clone https://github.com/canonical/lxd;cd lxd;make deps;echo 'export CGO_CFLAGS="${CGO_CFLAGS} -I$(go env GOPATH)/deps/dqlite/include/"' >> ~/.bashrc;echo 'export CGO_LDFLAGS="-L$(go env GOPATH)/deps/dqlite/.libs/"' >> ~/.bashrc;echo 'export LD_LIBRARY_PATH="$(go env GOPATH)/deps/dqlite/.libs/${LD_LIBRARY_PATH}"' >> ~/.bashrc;echo 'export CGO_LDFLAGS_ALLOW="(-Wl,-wrap,pthread_create)|(-Wl,-z,now)"' >> ~/.bashrc;source ~/.bashrc;make
